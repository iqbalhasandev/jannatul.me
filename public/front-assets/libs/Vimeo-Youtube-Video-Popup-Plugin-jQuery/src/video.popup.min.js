(function(o){o.fn.videoPopup=function(e){function t(e){o.each(p,function(o,t){var n=t.test(e,t.regex);if(n)return i.embedLink=t.mount(n),this})}function n(){var o='<iframe src="'+i.embedLink+'" allowfullscreen frameborder="0" width="'+s.width+'"></iframe>';return i.embedLink||(o='<div class="videopopupjs__block--notfound">Video not found</div>'),'<div class="videopopupjs videopopupjs--animation"><div class="videopopupjs__content"><span class="videopopupjs__close"></span>'+o+"</div></div>"}var i={embedLink:""},s=o.extend({autoplay:!1,showControls:!0,controlsColor:null,loopVideo:!1,showVideoInformations:!0,width:null,customOptions:{}},e),p={youtube:{regex:/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,test:function(o,e){var t=o.match(e);return!(!t||11!=t[7].length)&&t[7]},mount:function(e){var t={autoplay:s.autoplay,color:s.controlsColor,loop:s.loopVideo,controls:s.showControls,showinfo:s.showVideoInformations};return Object.assign(t,s.customOptions),"https://www.youtube.com/embed/"+e+"/?"+o.param(t)}},vimeo:{regex:/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,test:function(o,e){var t=o.match(e);return!(!t||!t[5].length)&&t[5]},mount:function(e){var t={autoplay:s.autoplay,color:s.controlsColor,loop:s.loopVideo,controls:s.showControls,title:s.showVideoInformations};return Object.assign(t,s.customOptions),"https://player.vimeo.com/video/"+e+"/?"+o.param(t)}}};return o(this).css("cursor","pointer"),o(this).on("click",function(e){e.preventDefault();var i=o(this).attr("video-url");t(i);o("body").append(n()),o(".videopopupjs__content").css("max-width",700),s.width&&o(".videopopupjs__content").css("max-width",s.width),o(".videopopupjs").hasClass("videopopupjs--animation")&&setTimeout(function(){o(".videopopupjs").removeClass("videopopupjs--animation")},200),o(".videopopupjs, .videopopupjs__close").click(function(){o(".videopopupjs").addClass("videopopupjs--hide").delay(515).queue(function(){o(this).remove()})})}),o(document).keyup(function(e){27==e.keyCode&&o(".videopopupjs__close").click()}),this}})(jQuery);